PRAGMA foreign_keys = ON;
        
CREATE TABLE IF NOT EXISTS grupos(
  id INTEGER PRIMARY KEY, 
  gid INTEGER UNIQUE, 
  nome TEXT, 
  max_warn INTEGER NOT NULL DEFAULT 3, 
  flags INTEGER DEFAULT 111
);

CREATE TABLE IF NOT EXISTS usuarios(
  id INTEGER PRIMARY KEY,
  uid INTEGER,
  gid INTEGER,
  apelido TEXT,
  nome TEXT,
  sobrenome TEXT,
  warnings INTEGER NOT NULL DEFAULT 0,
  likes INTEGER NOT NULL DEFAULT 0,
  ts TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY(gid) REFERENCES grupos (gid)
);

CREATE UNIQUE INDEX IF NOT EXISTS usuarios_idx ON usuarios (uid,gid);     